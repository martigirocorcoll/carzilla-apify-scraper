// Complete brand and model mappings for Carzilla.de scraper
// Generated on: 2025-09-26T15:14:03.783Z

const BRAND_MAP = {
    "Audi": "5",
    "BMW": "9",
    "Cupra": "238",
    "Mercedes-Benz": "42",
    "MINI": "45",
    "Porsche": "54",
    "Tesla": "202",
    "Volkswagen": "69"
};

const MODEL_MAP = {
    "Audi": {
        "50": "16581",
        "80": "1622",
        "A1": "19083",
        "A3": "1624",
        "A4": "1626",
        "A4 allroad": "20493",
        "A5": "19047",
        "A6": "1628",
        "A6 allroad": "20494",
        "A6 e-tron": "6001917",
        "A7": "19216",
        "A8": "1629",
        "Q2": "6000125",
        "Q3": "100004",
        "Q4": "6000763",
        "Q4 e-tron": "6001326",
        "Q5": "19155",
        "Q6 e-tron": "6001743",
        "Q7": "18683",
        "Q8": "6000303",
        "Q8 e-tron": "6001325",
        "QUATTRO": "18000",
        "R8": "18925",
        "RS": "-85",
        "RS Q3": "1010055",
        "RS3": "100005",
        "RS4": "100001",
        "RS5": "100002",
        "RS6": "100003",
        "RS7": "20295",
        "RSQ8": "6000574",
        "S3": "15637",
        "S4": "2108",
        "S5": "19048",
        "S6": "1633",
        "S6 e-tron": "6001918",
        "S7": "20155",
        "S8": "15123",
        "SQ2": "6000216",
        "SQ5": "20164",
        "SQ6 e-tron": "6001728",
        "SQ7": "6000133",
        "SQ8": "6000491",
        "TT": "15627",
        "TT RS": "20056",
        "TTS": "20055",
        "e-tron (alle)": "-6000767",
        "RS e-tron GT": "6000766",
        "e-tron": "6000430",
        "e-tron GT": "6000761"
    },
    "BMW": {
        "114": "20149",
        "116": "18480",
        "118": "18481",
        "120": "18482",
        "123": "19078",
        "125": "19084",
        "128": "6000723",
        "135": "19079",
        "216": "20397",
        "218": "20327",
        "220": "20326",
        "225": "20328",
        "228": "20481",
        "230": "74387",
        "235": "20329",
        "316": "1639",
        "318": "1640",
        "320": "1641",
        "325": "1644",
        "330": "15779",
        "335": "18805",
        "340": "21097",
        "420": "20289",
        "430": "20330",
        "435": "20288",
        "440": "74335",
        "520": "1648",
        "525": "1651",
        "528": "2145",
        "530": "1652",
        "535": "1653",
        "540": "1654",
        "545": "18383",
        "550": "18710",
        "635": "1656",
        "640": "1010001",
        "645": "18400",
        "650": "18709",
        "730": "1659",
        "740": "1661",
        "745": "16598",
        "750": "1662",
        "840": "1663",
        "850": "1664",
        "1er (alle)": "-37",
        "1er M Coupe": "19741",
        "2.5 CS": "6001928",
        "2er (alle)": "-98",
        "216 Active Tourer": "6000075",
        "216 Gran Tourer": "6000079",
        "218 Active Tourer": "6000076",
        "218 Gran Coupe": "6000597",
        "218 Gran Tourer": "6000080",
        "220 Active Tourer": "6000077",
        "220 Gran Coupe": "6000598",
        "220 Gran Tourer": "6000081",
        "223 Active Tourer": "6000885",
        "225 Active Tourer": "6000078",
        "3er (alle)": "-38",
        "318 Gran Turismo": "1010046",
        "320 Gran Turismo": "1010043",
        "330 Gran Turismo": "6000063",
        "4er (alle)": "-97",
        "418 Gran Coupe": "6000023",
        "420 Gran Coupe": "6000024",
        "430 Gran Coupe": "6000092",
        "440 Gran Coupe": "6000129",
        "5er (alle)": "-39",
        "520 Gran Turismo": "1010038",
        "6er (alle)": "-40",
        "630 Gran Turismo": "6000218",
        "640 Gran Turismo": "6000219",
        "7er (alle)": "-41",
        "8er (alle)": "-42",
        "M-Reihe (alle)": "-43",
        "M1": "1667",
        "M135": "20171",
        "M140i": "6000163",
        "M2": "21157",
        "M235i": "6000013",
        "M240i": "6000158",
        "M3": "1646",
        "M340d": "6000992",
        "M340i": "6000505",
        "M4": "6000033",
        "M440d": "6001038",
        "M440i": "6000685",
        "M5": "1655",
        "M550": "6000018",
        "M6": "18577",
        "M8": "6000554",
        "M850": "6000432",
        "X3 M": "6000479",
        "X3 M40": "6000506",
        "X3 M50": "6001818",
        "X4 M": "6000480",
        "X4 M40": "74322",
        "X5 M": "20174",
        "X5 M50": "20189",
        "X6 M": "20175",
        "X6 M50": "20190",
        "X-Reihe (alle)": "-44",
        "X1": "19242",
        "X2": "6000240",
        "X3": "18387",
        "X4": "20364",
        "X5": "16406",
        "X6": "19110",
        "X7": "6000406",
        "X7 M50": "6000908",
        "XM": "6001098",
        "X5 M60": "6001398",
        "X6 M60": "6001399",
        "X7 M60": "6001729",
        "Z-Reihe (alle)": "-45",
        "Z1": "1666",
        "Z3": "1665",
        "Z4": "18308",
        "Z4 M40i": "6001021",
        "Z8": "16402",
        "i-Modelle": "-46",
        "i3": "62221",
        "i4": "6000867",
        "i4 M50": "6000868",
        "i5": "6001485",
        "i7": "6001093",
        "iX": "6000773",
        "iX1": "6001094",
        "iX2": "6001509",
        "iX3": "6000733"
    },
    "Cupra": {
        "Ateca": "6000428",
        "Born": "6000621",
        "Formentor": "6000619",
        "Leon": "6000618",
        "Tavascan": "6000620",
        "Terramar": "6001832"
    },
    "Mercedes-Benz": {
        "190": "1846",
        "220": "15690",
        "230": "1848",
        "280": "1852",
        "300": "1853",
        "500": "1857",
        "A-Klasse (alle)": "-54",
        "A 160": "14869",
        "A 170": "15702",
        "A 180": "18486",
        "A 200": "18487",
        "A 220": "20218",
        "A 250": "20165",
        "A 35 AMG": "6000423",
        "A 45 AMG": "1010012",
        "B-Klasse (alle)": "-55",
        "B 150": "18606",
        "B 180": "18608",
        "B 200": "18609",
        "B 220": "20185",
        "B 250": "20166",
        "B Electric Drive": "20627",
        "C-Klasse (alle)": "-56",
        "C 160": "18613",
        "C 180": "1859",
        "C 200": "1860",
        "C 220": "2147",
        "C 230": "1861",
        "C 250": "15384",
        "C 300": "19249",
        "C 350": "18614",
        "C 400": "20916",
        "C 43 AMG": "15632",
        "C 63 AMG": "19107",
        "CL-Klasse (alle)": "-58",
        "CL 600": "18513",
        "CL 63 AMG": "18991",
        "CLA 35 AMG Shooting Brake": "6001219",
        "CLA-Klasse (alle)": "-96",
        "CLA 180": "20229",
        "CLA 180 Shooting Brake": "6000108",
        "CLA 200": "20230",
        "CLA 200 Shooting Brake": "6000109",
        "CLA 220": "20231",
        "CLA 220 Shooting Brake": "6000110",
        "CLA 250": "20232",
        "CLA 250 Shooting Brake": "6000111",
        "CLA 45 AMG": "20301",
        "CLA 45 AMG Shooting Brake": "6000112",
        "CLE-Klasse": "-6001551",
        "CLE 200": "6001552",
        "CLE 220": "6001553",
        "CLE 300": "6001554",
        "CLK-Klasse (alle)": "-59",
        "CLK": "14926",
        "CLK 200": "18879",
        "CLK 430": "18891",
        "CLS-Klasse (alle)": "-60",
        "CLS 250": "20244",
        "CLS 300": "20384",
        "CLS 350 Shooting Brake": "6000115",
        "CLS 53 AMG": "6000330",
        "Citan": "20195",
        "E-Klasse (alle)": "-61",
        "E 200": "1862",
        "E 220": "1863",
        "E 250": "15695",
        "E 280": "1864",
        "E 300": "15543",
        "E 350": "18546",
        "E 400": "18368",
        "E 43 AMG": "6000156",
        "E 450": "6000451",
        "E 500": "2162",
        "E 53 AMG": "6000315",
        "E 63 AMG": "18804",
        "EQ Modelle": "-6001630",
        "EQA": "6000758",
        "EQB": "6000759",
        "EQC 400": "6000485",
        "EQE": "6000856",
        "EQE SUV": "6001631",
        "EQS": "6000760",
        "G-Klasse (alle)": "-62",
        "G": "15776",
        "G 230": "20245",
        "G 280": "20248",
        "G 300": "20169",
        "G 320": "20250",
        "G 350": "20215",
        "G 400": "20251",
        "G 500": "20216",
        "G 63 AMG": "20167",
        "GLA-Klasse (alle)": "-99",
        "GLA 180": "20492",
        "GLA 200": "20343",
        "GLA 220": "20344",
        "GLA 250": "20345",
        "GLB-Klasse": "-6000603",
        "GLB 180": "6000511",
        "GLB 200": "6000488",
        "GLB 220": "6000512",
        "GLB 250": "6000489",
        "GLB 35 AMG": "6000604",
        "GLC-Klasse (alle)": "-116",
        "GLC 200": "6000453",
        "GLC 220": "21086",
        "GLC 250": "21087",
        "GLC 300": "74551",
        "GLC 350": "74390",
        "GLC 400": "6000513",
        "GLC 43 AMG": "74389",
        "GLC 450": "6001675",
        "GLC 63 AMG": "6000275",
        "GLE-Klasse (alle)": "-114",
        "GLE 250": "21093",
        "GLE 350": "20920",
        "GLE 43 AMG": "74391",
        "GLE 450": "6000437",
        "GLE 450 AMG": "20922",
        "GLE 53 AMG": "6000514",
        "GLE 580": "6000703",
        "GLE 63 AMG": "20923",
        "GLK-Klasse (alle)": "-83",
        "GLK 220": "19181",
        "GLK 250": "19253",
        "GLS-Klasse (alle)": "-122",
        "GLS 63 AMG": "74257",
        "GT-Klasse": "-6000911",
        "AMG GT": "20636",
        "AMG GT C": "6000207",
        "AMG GT R": "6000208",
        "AMG GT S": "6000209",
        "ML-Klasse (alle)": "-64",
        "ML 350": "18319",
        "R-Klasse (alle)": "-65",
        "R 320": "18603",
        "S 680": "6000858",
        "S-Klasse (alle)": "-66",
        "S 320": "15105",
        "S 350": "15697",
        "S 400": "15775",
        "S 450": "18895",
        "S 500": "15108",
        "S 560": "15724",
        "S 580": "6000857",
        "S 63 AMG": "18990",
        "S 65 AMG": "18580",
        "SL-Klasse (alle)": "-67",
        "SL 280": "1867",
        "SL 300": "15691",
        "SL 320": "1868",
        "SL 350": "16483",
        "SL 450": "16484",
        "SL 500": "1869",
        "SL 55 AMG": "18060",
        "SL 560": "16485",
        "SL 63 AMG": "19151",
        "SLC-Klasse (alle)": "-123",
        "SLC 180": "74258",
        "SLK-Klasse (alle)": "-68",
        "SLK 200": "18560",
        "SLK 230": "16446",
        "SLK 350": "18561",
        "SLS": "19223",
        "Sprinter": "15943",
        "T-Klasse": "-6001030",
        "T 180": "6001031",
        "V-Klasse (alle)": "-69",
        "V": "15945",
        "V 220": "15700",
        "V 250": "6000046",
        "V 300": "6000486",
        "Viano": "18394",
        "Vito": "15942",
        "X-Klasse": "-6000222",
        "X 220": "6000220",
        "X 250": "6000221",
        "eVito": "6001076"
    },
    "MINI": {
        "3/5-Türer (alle)": "-6000310",
        "Cooper": "16603",
        "Cooper C": "6001753",
        "Cooper D": "19744",
        "Cooper E": "6001605",
        "Cooper S": "19743",
        "Cooper SD": "19745",
        "Cooper SE": "6000593",
        "One": "16602",
        "One First": "6000157",
        "Cabrio-Serie (alle)": "-91",
        "Cooper Cabrio": "20000",
        "Cooper D Cabrio": "20001",
        "Cooper S Cabrio": "20002",
        "One Cabrio": "20018",
        "Clubman-Serie (alle)": "-92",
        "Cooper Clubman": "19053",
        "Cooper S Clubman": "20005",
        "Cooper SD Clubman": "20006",
        "One Clubman": "19742",
        "Countryman-Serie (alle)": "-93",
        "Cooper Countryman": "20007",
        "Cooper D Countryman": "20008",
        "Cooper E Countryman": "6001606",
        "Cooper S Countryman": "20009",
        "Cooper SD Countryman": "20010",
        "Cooper SE Countryman": "6000276",
        "Countryman C": "6001693",
        "Countryman D": "6001690",
        "Countryman E": "6001691",
        "Countryman S": "6001692",
        "Countryman SE All4": "6001689",
        "One Countryman": "19267",
        "John Cooper Works-Serie (alle)": "-201",
        "John Cooper Works": "19706",
        "John Cooper Works Cabrio": "20015",
        "John Cooper Works Clubman": "20016",
        "John Cooper Works Countryman": "20310"
    },
    "Porsche": {
        "356": "15957",
        "911": "1950",
        "912": "18527",
        "924": "1951",
        "930": "20845",
        "944": "1953",
        "964": "15977",
        "991": "20025",
        "992": "6000429",
        "993": "15881",
        "996": "15880",
        "997": "18548",
        "718 Spyder": "6000553",
        "911er (alle)": "-70",
        "Boxster": "1955",
        "Carrera GT": "15359",
        "Cayenne": "18284",
        "Cayman": "18684",
        "Macan": "20311",
        "Panamera": "19136",
        "Targa": "19085",
        "Taycan": "6000484"
    },
    "Tesla": {
        "Model 3": "6000499",
        "Model S": "20032",
        "Model Y": "6000577"
    },
    "Volkswagen": {
        "Amarok": "19261",
        "Arteon": "6000183",
        "Beetle": "19724",
        "Caddy (alle)": "-6001824",
        "Caddy": "15734",
        "Caddy California": "6000932",
        "Caddy Maxi": "6001822",
        "California": "18575",
        "Caravelle": "18210",
        "Crafter (alle)": "-6000739",
        "Crafter": "18781",
        "e-Crafter": "6000738",
        "Der neue California": "6001867",
        "Der neue Transporter": "-6002210",
        "Transporter": "18230",
        "e-Transporter": "6002209",
        "Eos": "18707",
        "Golf-Alle": "-101",
        "Golf": "2084",
        "Golf Cabriolet": "20341",
        "Golf GTI": "20342",
        "Golf Plus": "20026",
        "Golf R": "6001375",
        "Golf Sportsvan": "20376",
        "Golf Variant": "20340",
        "e-Golf": "6001807",
        "Grand California": "6000494",
        "ID. Buzz": "6000991",
        "ID. Buzz Cargo": "6002161",
        "ID.3": "6000660",
        "ID.4": "6000701",
        "ID.5": "6000860",
        "ID.7": "6001465",
        "Jetta": "2087",
        "Karmann Ghia": "16623",
        "Käfer": "2114",
        "Lupo": "15534",
        "Multivan": "18220",
        "Passat (alle)": "-6000866",
        "Passat": "2089",
        "Passat Alltrack": "20339",
        "Passat CC": "20337",
        "Passat Variant": "20338",
        "Polo": "2090",
        "Polo Cross": "20170",
        "Polo GTI": "20335",
        "Scirocco": "2092",
        "Sharan": "2093",
        "T-Cross": "6000421",
        "T-Roc": "6000214",
        "T1": "19618",
        "T2": "15363",
        "T4": "14792",
        "T4 Caravelle": "20357",
        "T4 Kombi": "20359",
        "T5-Alle": "-6000005",
        "T5": "18370",
        "T5 California": "6000006",
        "T5 Caravelle": "6000007",
        "T5 Kombi": "6000011",
        "T5 Multivan": "6000008",
        "T5 Transporter": "6000010",
        "T6 (alle)": "-115",
        "T6 California": "21083",
        "T6 Caravelle": "21081",
        "T6 Kasten": "6000091",
        "T6 Kombi": "6000088",
        "T6 Multivan": "21082",
        "T6 Transporter": "21080",
        "T6.1 (alle)": "-6000726",
        "T6.1 California": "6000730",
        "T6.1 Caravelle": "6000728",
        "T6.1 Kasten": "6000732",
        "T6.1 Kombi": "6000731",
        "T6.1 Multivan": "6000729",
        "T6.1 Transporter": "6000727",
        "T7 (alle)": "-6000864",
        "T7 California": "6001988",
        "T7 Caravelle": "6001989",
        "T7 Kombi": "6001990",
        "T7 Multivan": "6000861",
        "T7 Transporter": "6001991",
        "Taigo": "6000821",
        "Tayron": "6001923",
        "Tiguan": "19063",
        "Tiguan Allspace": "6000236",
        "Touareg": "18285",
        "Touran": "18329",
        "e-Caravelle": "6002311",
        "e-up!": "6001448",
        "up!": "19750"
    }
};

// Helper function to build search URL
function buildSearchUrl({ make, model, price_max, mileage_max, first_registration_date }) {
    const brandId = BRAND_MAP[make];
    const modelId = MODEL_MAP[make] && MODEL_MAP[make][model];

    if (!brandId) {
        throw new Error(`Brand ${make} not supported. Available brands: ${Object.keys(BRAND_MAP).join(', ')}`);
    }

    let url = `https://carzilla.de/Fahrzeuge/Fahrzeugliste?m=${brandId}`;

    if (modelId) {
        url += `&mo=${modelId}`;
    }

    // Note: Additional filter parameters would need to be discovered
    // through further analysis of the search form

    return url;
}

module.exports = {
    BRAND_MAP,
    MODEL_MAP,
    buildSearchUrl
};
